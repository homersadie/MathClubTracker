@{
    ViewBag.Title = "Home Page";
}



<div class="content-container-fluid">
    <div class="row">
        <div class="cols-sample-area" style="width:600px">

            <div id="Grid" class="waiting"></div>
        </div>
    </div>

    <div class="row">
        1. Add Student<br/>
        2. Remove Student<br/>
        3. Edit Student<br/>
        4. Add Class<br/>
        5. Remove Class<br/>
        6. Edit Class<br/>
        7. Add Class Session<br/>
        8. Remove Class Session<br/>
        9. Edit Class Session<br/>
        9a. Add Students
        9b. Remove Students<br/>
        10. Add Course Category<br/>
        11. Remove Course Category<br/>
        12. Edit Course Category<br/>
        13. Browse Course Categories<br/>

    </div>

    <table>
        <tr>
            <td>Math Genius Id</td><td>Last Name</td><td>First Name</td><td>Sex</td><td>Graduation Year</td><td>&nbsp;</td>
        </tr>
        <tr>
            <td><input type="text" id="txtMathGeniusId"/></td>
            <td><input type="text" id="txtLastName" /></td>
            <td><input type="text" id="txtFirstName" /></td>
            <td><input type="text" id="sex"/>
                    <div id="sexList">
                        <ul>
                            <li>Male</li>
                            <li>Female</li>
                        </ul>

                    </div></td>
            <td><input type="text" id="gradyear" /></td>
            <td><input type="button" id="btnAddStudent" value="Add"; onclick="AddStudent()" /></td>
        </tr>
        <tr><td colspan="6"><div id="updateMessage"></div></td></tr>
    </table>
</div>

<div class="content-container-fluid">
    <div class="row">
        <div class="cols-sample-area">
            <div class="frame">
                <div class="control">
                    <div class="posupload">Select a file to upload </div>
                    <div id="UploadDefault"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<style type="text/css">
    #UploadDefault {
        margin: 0 auto;
        padding: 10px;
    }

    .posupload {
        text-align: center;
    }
</style>



<script type="text/x-jsrender" id="mgTemplate">
    <a href="@Url.Action("Detail","Student")?id={{:MathGeniusId}}">View {{:MathGeniusId}}</a>
</script>

    <script type="text/javascript">



        $(function () {
            //debugger;
            $("#Grid").ejGrid({
                dataSource: ej.DataManager({url: "@Url.Action("PagingGetStudents","Student")"   }),
                allowPaging: true,
                pageSettings: { pageSize: 10 , enableQueryString: true },
                allowSorting: true,
                allowMultiSorting: true,
                columns: [
                    { field: "MathGeniusId", headerText: "MG ID", template: true, templateID: "#mgTemplate", width: 75, textAlign: ej.TextAlign.Left, },
                        { field: "LastName", headerText: "Last Name", width: 75, textAlign: ej.TextAlign.Left },
                        { field: "FirstName", headerText: "First Name", width: 75, textAlign: ej.TextAlign.Left },
                        { field: "Gender", headerText: "Sex", width: 75, textAlign: ej.TextAlign.Center },
                        { field: "GraduationYear", headerText: "Class Of", width: 125, textAlign: ej.TextAlign.Center }
                ]
            });

            $("#txtMathGeniusId").ejNumericTextbox(
                         {
                             name: "numeric",
                             value: 100,
                             minValue: 1,
                             width: "100%"
                         });
            $('#sex').ejDropDownList({
                targetID: "sexList",
                watermarkText: "Sex",
                width: "100%"
            });

            $('#gradyear').ejDropDownList({
                dataSource: ej.DataManager({url: "@Url.Action("GraduationYear","Code")"   }),
                watermarkText: "Select a Graduation Year",
                width: "100%"
            });

            saveUrl = "@Url.Action("UploadStudents","Student")";
            removeUrl = "@Url.Action("RemoveFile","Student")";
            $("#UploadDefault").ejUploadbox({
                saveUrl: saveUrl,
                removeUrl: removeUrl,
                multipleFilesSelection: false,
                error: function (args) {
                    alert(args.error);
                }
            });

        });

        function AddStudent() {
            $("#btnAddStudent").prop("disabled", "disabled");
            $("#updateMessage").hide();
            $.ajax({
                url: '@Url.Action("AddStudent","Student")',
                data: {
                    MathGeniusId : $("#txtMathGeniusId").val(),
                    LastName: $("#txtLastName").val(),
                    FirstName: $("#txtFirstName").val(),
                    Sex: $("#sex").val(),
                    GraduationYear: $("#gradyear").val()
                },
                error: function (e) {
                    $("#updateMessage").show();
                    $('#updateMessage').html('<p>' + e + '</p>');
                },
                complete: function () {
                    $("#btnAddStudent").prop("disabled","");
                },
                success: function (data) {
                    ProcessServiceResult(data, "#updateMessage", resetGrid(), null);
                },
                type: 'GET'
            });
        }

        function AddStudents() {

        }

        function resetGrid() {
            $("#Grid").ejGrid("refreshContent");
        }
</script>








